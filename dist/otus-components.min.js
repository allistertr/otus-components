!function(){"use strict";angular.module("otus.components",[])}(),function(){"use strict";angular.module("otus.components").component("dynamicDataTable",{template:'<style>\n  .my-border {\n    border: 1px solid blue;\n  }\n\n  .dynamic-structure {\n    margin: 16px;\n  }\n\n  .dynamic-table-body-row:focus,\n  .dynamic-table-header-column:focus {\n    outline: none;\n  }\n\n  .dynamic-table-body-row,\n  .dynamic-table-header-column {\n    cursor: pointer;\n  }\n\n  .dynamic-table-row-selected {\n    background-color: #F5F5F5;\n  }\n\n  .dynamic-table md-checkbox {\n    position: relative;\n    top: 7.5px;\n  }\n\n  .dynamic-table md-icon.dynamic-arrow-icon,\n  .dynamic-table md-icon.dynamic-arrow-icon-inverse {\n    -webkit-transition-duration: 0.5s;\n    -moz-transition-duration: 0.5s;\n    -o-transition-duration: 0.5s;\n    transition-duration: 0.5s;\n\n    -webkit-transition-property: -webkit-transform;\n    -moz-transition-property: -moz-transform;\n    -o-transition-property: -o-transform;\n    transition-property: transform;\n  }\n\n  md-icon.dynamic-arrow-icon {\n    -moz-transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n\n  md-icon.dynamic-arrow-icon-inverse {\n    -moz-transform: rotate(180deg);\n    -webkit-transform: rotate(180deg);\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n  }\n\n  .dynamic-table-body-column,\n  .dynamic-table-header-column {\n    padding: 4px 10px;\n  }\n\n  .dynamic-table-body-row,\n  .dynamic-table-header-row {\n    border-bottom: 1px solid #E0DFDF;\n  }\n\n  .dynamic-table-column-first {\n    padding-left: 16px;\n\n  }\n\n  .dynamic-table-column-last {\n    padding-right: 16px;\n  }\n\n  .dynamic-table-column-left {\n    text-align: left;\n  }\n\n  .dynamic-table-column-right {\n    text-align: right;\n  }\n\n  .dynamic-table-column-center {\n    text-align: center;\n  }\n\n  .dynamic-table-expand-filter {\n    margin-top: 20px;\n  }\n\n  .dynamic-table-animated {\n    -moz-transition: transform 0.5s;\n    -webkit-transition: transform 0.5s;\n    -ms-transition: transform 0.5s;\n    -o-transition: transform 0.5s;\n    transition: transform 0.5s;\n    transition: .2s all;\n  }\n\n  .dynamic-table-animated.ng-enter-active {\n    /*-moz-transform: scale(0.1);\n    -webkit-transform: scale(0.1);\n    -ms-transform: scale(0.1);\n    -o-transform: scale(0.1);\n    transform: scale(0.1); */\n    opacity: 1;\n  }\n\n  .dynamic-table-animated.ng-enter {\n    /*-moz-transform: scale(0.1);\n    -webkit-transform: scale(0.1);\n    -ms-transform: scale(0.1);\n    -o-transform: scale(0.1);\n    transform: scale(0.1); */\n    opacity: 0;\n  }\n\n  .dynamic-table-animated.ng-leave {\n    transition: 0.5s linear all;\n    opacity: 1;\n  }\n\n  .dynamic-table-animated.ng-leave.ng-leave-active {\n    opacity: 0;\n  }\n</style><md-whiteframe class="md-whiteframe-1dp dynamic-structure" layout="column" flex><div ng-if="$ctrl.tableTitle" layout="row" layout-align="space-between"><md-subheader class="md-no-sticky moment-type-title backgroud-color-default left-alignment">{{$ctrl.tableTitle}}</md-subheader><md-menu md-position-mode="target-right target"><md-button class="md-icon-button" ng-click="$mdOpenMenu()"><md-icon md-font-set="material-icons">menu</md-icon></md-button><md-menu-content><md-menu-item><md-button ng-click="$ctrl.orderByIndex()">Ordenar por inserção</md-button></md-menu-item></md-menu-content></md-menu></div><div ng-if="!$ctrl.tableTitle && !$ctrl.disableFilter" class="dynamic-table-expand-filter"></div><div ng-if="!$ctrl.disableFilter" layout="row" layout-align="center center" flex><div layout="row" layout-margin flex><md-input-container class="remove-errors-spacer" flex><input type="text" flex placeholder="Filtro de busca" ng-model="$ctrl.filter" ng-change="$ctrl.filterRows()" ng-model-options="{ allowInvalid: true, debounce: 500 }"></md-input-container></div><div ng-if="!$ctrl.disableShowAll && (!$ctrl.disablePagination && $ctrl.filter.length && $ctrl.viewPerPage)" style="padding-right:15px" class="dynamic-table-animated"><md-checkbox flex style="margin:0;" aria-label="Filtrar todos" class="md-primary" ng-checked="$ctrl.filterAll" ng-click="$ctrl.filterAllChanged()"><span class="md-body-1">Filtrar Todos</span></md-checkbox><md-tooltip md-direction="top">Exibe todos os registros encontrados</md-tooltip></div></div><div ng-if="$ctrl.error.isError"><h1>{{$ctrl.error.msg}}</h1></div><div ng-if="!$ctrl.error.isError" class="dynamic-table" flex><div ng-mouseenter="$ctrl.leaveFocus()" class="dynamic-table-header" layout="row" flex><div class="dynamic-table-header-row" layout="row" layout-align="start center" flex><div style="padding-left:15px" ng-if="!$ctrl.disableCheckbox" layout="column" flex="5" layout-align="center center"><md-checkbox flex aria-label="Selecionar Todos os Registros" class="md-primary" ng-checked="$ctrl.selectedItemCounter === $ctrl.table.rows.length" md-indeterminate="$ctrl.selectedItemCounter !== $ctrl.table.rows.length && $ctrl.selectedItemCounter>0" ng-click="$ctrl.selectDeselectAllRows()"></md-checkbox><md-tooltip md-direction="top">{{$ctrl.selectedItemCounter === $ctrl.table.rows.length ? \'Deseleciona Todos\' : \'Seleciona Todos\'}}</md-tooltip></div><div ng-if="$ctrl.disableCheckbox" style="padding-top:40px"></div><div class="{{\'dynamic-table-header-column \' + $ctrl.getColumnPositionClass($index, $ctrl.table.headers)}}" ng-repeat="header in $ctrl.table.headers track by $index" flex="{{$ctrl.getFlex($index)}}" ng-click="$ctrl.changeOrder($index)">{{header}}<md-icon ng-if="$ctrl.orderQuery === \'column\' + $index + \'.orderValue\'" ng-class="$ctrl.getOrderIcon()" md-font-set="material-icons">arrow_drop_up</md-icon></div></div></div><div class="dynamic-table-body" layout="column" flex id="dynamic-body"><div class="dynamic-table-body-row {{($ctrl.disablePagination || !$ctrl.viewPerPage || $ctrl.filterAll) ? \' dynamic-table-animated \' : \'\'}}" layout="row" layout-align="start center" flex ng-repeat="row in $ctrl.table.rows | orderBy:$ctrl.orderQuery:$ctrl.orderInverse" ng-click="$ctrl.selectDeselectRow(row)" name="bodyRow{{row.index}}" id="bodyRow{{row.index}}" ng-mouseenter="$ctrl.mouseEnter(row)" ng-mouseleave="$ctrl.mouseLeave(row)" ng-style="row.style"><div style="padding-left:15px" ng-if="!$ctrl.disableCheckbox" layout="column" flex="5" layout-align="center center"><md-checkbox ng-checked="row.selected" aria-label="Checkbox registro da linha {{row.index}}" class="md-primary"></md-checkbox></div><div ng-if="$ctrl.disableCheckbox" style="padding-top:40px"></div><div class="{{\'dynamic-table-body-column \' + $ctrl.getColumnPositionClass(column.index,row.columns)}}" ng-repeat="column in row.columns" flex="{{$ctrl.getFlex(column.index)}}"><span ng-if="!column.specialField" class="md-body-1">{{column.value}}</span><div ng-if="column.specialField && column.specialField.iconStructure"><md-tooltip ng-if="column.specialField.iconStructure.tooltip">{{column.specialField.iconStructure.tooltip}}</md-tooltip><md-icon class="material-icons {{column.specialField.iconStructure.class}}">{{column.specialField.iconStructure.icon}}</md-icon></div><md-button ng-if="column.specialField && column.specialField.iconButton" class="md-icon-button {{column.specialField.iconButton.classButton}}" ng-click="$ctrl.iconButtonClick(column.specialField.iconButton, row)"><md-tooltip ng-if="column.specialField.iconButton.tooltip">{{column.specialField.iconButton.tooltip}}</md-tooltip><md-icon md-font-set="material-icons">{{column.specialField.iconButton.icon}}</md-icon></md-button></div></div></div><div ng-if="!$ctrl.disablePagination" ng-mouseenter="$ctrl.leaveFocus()" class="dynamic-pagination" layout="row" layout-align="start center" flex><div><div ng-if="!$ctrl.disableShowAll" layout="row" class="md-body-1" layout-margin><md-button class="md-accent" ng-click="$ctrl.viewPerPageChanged()" ng-disabled="$ctrl.filterAll"><md-tooltip>{{$ctrl.viewPerPage ? \'Exibir todos os Registros: Desabilita Paginação\' : \'Exibir Registros por Página: Habilita Paginação\'}}</md-tooltip><span class="md-body-1">{{$ctrl.viewPerPage ? \'Exibir Todos\' : \'Exibir por Página\'}}</span></md-button></div></div><div layout="row" layout-align="end center" layout-padding flex ng-if="$ctrl.viewPerPage && !$ctrl.filterAll"><div><span class="md-body-1">Linhas por página:</span></div><div><md-select ng-model="$ctrl.rowPerPageDefault" aria-label="Página" style="margin:0" ng-change="$ctrl.rowPerPageChange()"><md-option ng-repeat="rowPerPage in $ctrl.rowsPerPageArray" value="{{rowPerPage}}"><span class="md-body-1">{{rowPerPage}}</span></md-option></md-select></div><div><span class="md-body-1">{{$ctrl.table.textPage}}</span></div><div><md-button class="md-icon-button" aria-label="Página Anterior" ng-disabled="!$ctrl.getIsPreviousPage()" ng-click="$ctrl.previousPage()"><md-tooltip>Página Anterior</md-tooltip><md-icon md-font-set="material-icons">keyboard_arrow_left</md-icon></md-button></div><div><md-button class="md-icon-button" aria-label="Página Seguinte" ng-disabled="!$ctrl.getIsNextPage()" ng-click="$ctrl.nextPage()"><md-tooltip>Próxima Página</md-tooltip><md-icon md-font-set="material-icons">keyboard_arrow_right</md-icon></md-button></div></div></div></div></md-whiteframe>',bindings:{headers:"<",elementsArray:"=?",elementsProperties:"<",callbackAfterChange:"=?",tableUpdateFunction:"=?",formatData:"<",formatDataIndexArray:"<",formatDataPropertiesArray:"<",tableTitle:"<",alignArray:"<",flexArray:"<",orderIndices:"<",orderByInsertion:"<",numberFieldsAlignedLeft:"<",selectedColor:"<",hoverColor:"<",disableCheckbox:"<",disableReorder:"<",disableFilter:"<",disablePagination:"<",rowsPerPageArray:"<",rowPerPageDefault:"<",hideDelayTime:"<",dynamicTableSettings:"="},controller:e}),e.$inject=["$filter","$mdToast","$scope"];function e(e,t,n){var r=this;r.selectedItemCounter=0,r.table,r.defaultAlign="left",r.orderQuery,r.orderInverse=!1,r.error,r.$onInit=function(){n.safeApply||(n.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)});(function(){if(r.dynamicTableSettings){var e=r.dynamicTableSettings;e=e.getSettings?e.getSettings():e,r.headers=e.headers,r.elementsArray=e.elementsArray,r.elementsProperties=e.elementsProperties,r.callbackAfterChange=e.callbackAfterChange,r.tableUpdateFunction=e.tableUpdateFunction,r.formatData=e.formatData,r.formatDataIndexArray=e.formatDataIndexArray,r.formatDataPropertiesArray=e.formatDataPropertiesArray,r.tableTitle=e.tableTitle,r.flexArray=e.flexArray,r.alignArray=e.alignArray,r.orderIndices=e.orderIndices,r.numberFieldsAlignedLeft=e.numberFieldsAlignedLeft,r.selectedColor=e.selectedColor,r.hoverColor=e.hoverColor,r.disableCheckbox=e.disableCheckbox,r.disableReorder=e.disableReorder,r.disableFilter=e.disableFilter,r.disablePagination=e.disablePagination,r.rowsPerPageArray=e.rowsPerPageArray,r.rowPerPageDefault=e.rowPerPageDefault,r.hideDelayTime=e.hideDelayTime,r.disableShowAll=e.disableShowAll}r.flexArray||(r.flexArray=[]);r.alignArray||(r.alignArray=[]);r.hoverColor||(r.hoverColor="#EEEEEE");r.selectedColor||(r.selectedColor="#F5F5F5");r.rowsPerPageArray||(r.rowsPerPageArray=[10,25,50,100,250,500,1e3]);r.rowPerPageDefault||(r.rowPerPageDefault=r.rowsPerPageArray.length>=2?r.rowsPerPageArray[2]:r.rowsPerPageArray[0]);r.formatData||(r.formatData="dd/MM/yyyy");r.formatDataIndexArray||(r.formatDataIndexArray=[]);r.formatDataPropertiesArray||(r.formatDataPropertiesArray=[]);r.hideDelayTime||(r.hideDelayTime=3e3);r.callbackAfterChange||(r.callbackAfterChange=function(){});(function(){var e=[];r.alignArray&&r.alignArray.length?r.alignArray.forEach(function(t){e.push(function(e){var t=["right","left","center"],n=e,i=!1;"string"!=typeof e&&(n="");for(var o=0;o<t.length;o++){var a=t[o];if(n.toLowerCase().trim()===a){n=a,i=!0;break}}i||(n=r.defaultAlign);return n}(t))}):r.numberFieldsAlignedLeft&&r.elementsProperties.forEach(function(t,n){var i=n<r.numberFieldsAlignedLeft?"left":"right";e.push(i)});r.elementsProperties.forEach(function(t,n){void 0===e[n]&&e.push(r.defaultAlign)}),r.alignArray=e})(),r.error={isError:!1,msg:"Devem ser informadas a mesma quantidade de valores e de cabeçalhos."}})(),r.orderByInsertion?f():g(),r.tableUpdateFunction=i,m()},r.changeOrder=function(e){var t="column"+e;t+".orderValue"===r.orderQuery?r.orderInverse=!r.orderInverse:(r.orderInverse=!1,g(t))},r.orderByIndex=f,r.creacteTable=m,r.selectDeselectRow=function(e){e.specialFieldClicked||(e.selected?v(e):y(e),l(e));e.specialFieldClicked=!1},r.selectDeselectAllRows=function(){var e=r.selectedItemCounter===r.table.rows.length;r.table.rows.forEach(function(t){e?v(t):y(t),l(t)},this)},r.runCallbackOnChange=function(e,t){var n={type:t,element:e.ref};r.callbackAfterChange(n)},r.getColumnPositionClass=function(e,t){var n="";void 0===t&&(t=[]);n=n+" dynamic-table-column-"+r.alignArray[e]||r.defaultAlign+" ",0===e&&r.disableCheckbox&&(n+=" dynamic-table-column-first ");e+1===t.length&&(n+=" dynamic-table-column-last ");return n},r.getFlex=function(e){var t=r.flexArray[e];""!==t&&NaN===(t=Number(t))&&(t="");return t},r.filterRows=s,r.rowPerPageChange=function(){r.table.currentPage=1,c()},r.pagesChage=c,r.setCurrentPageText=d,r.getIsNextPage=function(){return u(r.table.currentPage+1)},r.getIsPreviousPage=function(){return r.table.currentPage>1},r.mouseEnter=function(e){r.currentRowOnHover&&r.currentRowOnHover.index===e.index||(r.currentRowOnHover&&r.changeRowStyle(r.currentRowOnHover),r.currentRowOnHover=e,r.changeRowStyle(e,!0))},r.mouseLeave=function(e){},r.changeRowStyle=l,r.leaveFocus=function(){r.currentRowOnHover&&(r.changeRowStyle(r.currentRowOnHover),r.currentRowOnHover=void 0)},r.nextPage=function(){r.disableAnimation=!0,r.table.currentPage++,c()},r.previousPage=function(){r.disableAnimation=!0,r.table.currentPage--,c()},r.iconButtonClick=function(e,t){t.specialFieldClicked=!0;var n=function(n){(function(e){var t=!1;if(e&&r.elementsProperties.length)for(var n=0;n<r.elementsProperties.length;n++){var i=r.elementsProperties[n];if("string"==typeof i){var o=i.split(".")[0];if(e[o]){t=!0;break}}}return t})(n)||(n=r.table.fullRows[t.index]),e.renderElement&&n&&!e.removeElement&&function(e,t){var n=h(e,t.index);t.ref=n.ref,t.columns=n.columns}(n,t),e.removeElement&&(i=t,r.elementsArray.splice(i.index,1),P());var i;e.renderGrid&&!e.removeElement&&P(),e.successMsg&&a(e.successMsg)};if(e.buttonFuntion){e.receiveCallback?e.buttonFuntion(t.ref,n):e.returnsSuccess?e.buttonFuntion(t.ref)&&n():n(e.buttonFuntion(t.ref))}else n()},r.disableAnimation=!1,r.filter="",r.filterAll=!1,r.filterAllChanged=function(e){var t=void 0!==e?e:!r.filterAll;r.filterAll=t,s()},r.viewPerPage=!0,r.viewPerPageChanged=function(e){var t=void 0!==e?e:!r.viewPerPage;r.viewPerPage=t,s()},r.currentRowOnHover;function i(e){r.elementsArray=e||r.elementsArray,r.selectedItemCounter=0,r.creacteTable(),n.safeApply()}function o(){return!r.disablePagination&&r.viewPerPage&&!r.filterAll}function a(e){t.show(t.simple().textContent(e).hideDelay(r.hideDelayTime))}function l(e,t){t?e.style=e.styleHover:e.selected?e.style=e.styleSelect:e.style={}}function s(){if(r.filter.length){r.table.filteredRows=e("filter")(r.table.fullRows,r.filter);var t=r.table.filteredRows.length;a(t?1===t?t+" Registro foi encontrado.":t+" Registros foram encontrados.":"Nenhum registro foi encontrado.")}else r.table.filteredRows=r.table.fullRows,r.filterAll=!1;r.table.currentPageRows=r.table.filteredRows,r.table.currentPage=1,c()}r.getOrderIcon=function(){return r.orderInverse?"dynamic-arrow-icon-inverse":"dynamic-arrow-icon"};function c(){1===r.table.currentPage?r.table.startPage=0:r.table.startPage=(r.table.currentPage-1)*r.rowPerPageDefault;var e=r.table.currentPage*r.rowPerPageDefault-1;e>=length-1?r.table.endPage=e:r.table.endPage=r.table.filteredRows.length-1,d(),o()&&(r.table.currentPageRows=r.table.filteredRows.slice(r.table.startPage,r.table.endPage+1)),r.table.rows=r.table.currentPageRows,r.selectedItemCounter=r.table.rows.filter(function(e){return e.selected}).length}function d(){var e=r.table.endPage+1>r.table.filteredRows.length?r.table.filteredRows.length:r.table.endPage+1;r.table.textPage=r.table.startPage+1+"-"+e+" de "+r.table.filteredRows.length}function u(e){var t=!1;if(e>0){1===e?t=!0:(e-1)*r.rowPerPageDefault<r.table.filteredRows.length&&(t=!0)}return t}function m(){r.table={headers:r.headers,rows:[],fullRows:[],filteredRows:[],currentPageRows:[],currentPage:1,startPage:0,endPage:r.rowPerPageDefault+1,textPage:""},r.elementsArray.forEach(function(e,t){r.table.fullRows.push(h(e,t))},this),r.table.filteredRows=r.table.fullRows,s(),c()}function f(){g("$index"),r.orderInverse=!r.orderInverse}function g(e){e?r.orderQuery="$index"===e?e:e+".orderValue":(r.orderQuery=[],r.orderIndices&&r.orderIndices.forEach(function(e){r.orderQuery.push("column"+e+".orderValue")}))}function b(e,t){return e[t]}function p(t,n,i,o){var a,l=void 0;n.split(".").forEach(function(e){l=b(void 0===l?t:l,e)},this),a=l,o&&(s=l,c=n,d=i,r.formatDataIndexArray.filter(function(e){return Number(e)===d}).length?s=e("date")(s,r.formatData):r.formatDataPropertiesArray.filter(function(e){return e===c}).length&&(s=e("date")(s,r.formatData)),a=s);var s,c,d;return a}function y(e){e.selected||(e.selected=!0,r.selectedItemCounter++,r.runCallbackOnChange(e,"select"))}function v(e){e.selected&&(e.selected=!1,r.selectedItemCounter--,r.runCallbackOnChange(e,"deselect"))}function h(e,t){var n={type:"dynamicDataTableRow",ref:e,columns:[],index:t,selected:!1,hover:!1,styleSelect:{"background-color":r.selectedColor},styleHover:{"background-color":r.hoverColor},style:{},specialFieldClicked:!1};return r.elementsProperties.forEach(function(t,r){var i=void 0;if("string"==typeof t)var o=p(e,t,r,!0),a=p(e,t,r);else a=(i=function(e,t){var n=void 0,r=e.iconButton,i=e.iconWithFunction;if(r)n={iconButton:{icon:r.icon,tooltip:r.tooltip||"",classButton:r.classButton||"",successMsg:r.successMsg||"",buttonFuntion:r.buttonFuntion,returnsSuccess:r.returnsSuccess||!1,renderElement:r.renderElement||!1,renderGrid:r.renderGrid||!1,removeElement:r.removeElement||!1,receiveCallback:r.receiveCallback||!1},orderValue:r.icon};else if(i){var o=i.iconFunction(t);n={iconStructure:o,orderValue:o.orderValue}}return n}(t,e)).orderValue||"";var l,s,c,d,u=(l=o,s=a,c=r,d=i,{type:"dynamicDataTableColumn",value:l,orderValue:s,index:c,name:"column"+c,specialField:d});n.columns.push(u),n[u.name]=u},this),n}function P(){var e=r.table.currentPage;if(i(),o())for(var t=e;t>=1;t--)if(u(t)){r.table.currentPage=t,c();break}}}}(),function(){"use strict";angular.module("otus.components").factory("otus.components.DynamicTableSettingsFactory",function(){this.create=function(){return new function(){var e=this,t=[];e.settings={elementsArray:[],elementsProperties:[],headers:[],callbackAfterChange:void 0,tableUpdateFunction:void 0,tableTitle:void 0,orderIndices:[],numberFieldsAlignedLeft:10,flexArray:[],alignArray:[],formatData:void 0,selectUnselectFunction:void 0,formatDataPropertiesArray:[],formatDataIndexArray:[],disableCheckbox:!1,disableFilter:!1,disableReorder:!1,disableShowAll:!1,disablePagination:!1,selectedColor:void 0,hoverColor:void 0,markupAttribute:void 0,selectionFunction:void 0,buttonFunctionArray:[]},e.getSettings=function(){var n=t.sort(function(e,t){return e.ordenationPriorityIndex<t.ordenationPriorityIndex?-1:e.ordenationPriorityIndex>t.ordenationPriorityIndex?1:0});return e.settings.orderIndices=[],n.forEach(function(t){e.settings.orderIndices.push(t.headerIndex)}),e.settings},e.toJson=function(){return JSON.stringify(_settings)},e.setElementsArray=function(t){return e.settings.elementsArray=t,e},e.setCallbackAfterChange=function(t){return e.settings.callbackAfterChange=t,e},e.setTableUpdateFunction=function(t){return e.settings.tableUpdateFunction=t,e},e.setTitle=function(t){return e.settings.tableTitle=t,e},e.setNumberFieldsAlignedLeft=function(t){return e.settings.numberFieldsAlignedLeft=t,e},e.setFormatData=function(t){return e.settings.formatData=t,e},e.setSelectUnselectFunction=function(t){return e.settings.selectUnselectFunction=t,e},e.setCheckbox=function(t){return t=!!t,e.settings.disableCheckbox=!t,e},e.setFilter=function(t){return t=!!t,e.settings.disableFilter=!t,e},e.setShowAll=function(t){return t=!!t,e.settings.disableShowAll=!t,e},e.setReorder=function(t){return t=!!t,e.settings.disableReorder=!t,e},e.setPagination=function(t){return t=!!t,e.settings.disablePagination=!t,e},e.setSelectedColor=function(t){return e.settings.selectedColor=t,e},e.setHoverColor=function(t){return e.settings.hoverColor=t,e},e.addHeader=function(n,r,i,o){e.settings.headers.push(n||""),void 0===r&&(r="");e.settings.flexArray.push(r);var a=!1,l=["right","left","center"];"string"!=typeof i&&(i="");for(var s=0;s<l.length;s++){var c=l[s];if(i.toLowerCase().trim()===c){i=c,a=!0;break}}a||(i="");e.settings.alignArray.push(i),void 0!==o&&t.push({headerIndex:e.settings.headers.length-1,ordenationPriorityIndex:o});return e},e.addColumnProperty=function(t,r){e.settings.elementsProperties.push(t||""),r&&r.toUpperCase&&"DATE"===r.toUpperCase()&&e.settings.formatDataIndexArray.push(e.settings.elementsProperties.length-1);return n(),e},e.addColumnIconButton=function(t,r,i,o,a,l,s,c,d,u){return e.settings.elementsProperties.push({iconButton:{icon:t||"",tooltip:r||"",classButton:i||"",successMsg:o||"",buttonFuntion:a||function(){console.log("buttonFunction not implemented.")},returnsSuccess:l||!1,renderElement:s||!1,renderGrid:c||!1,removeElement:d||!1,receiveCallback:u||!1}}),n("10","center"),e},e.addIconWithFunction=function(t){return e.settings.elementsProperties.push({iconWithFunction:{iconFunction:t||function(){}}}),n("10","center"),e};function n(t,n){return e.settings.elementsProperties.length>e.settings.headers.length&&e.addHeader("",t,n),e}}};return this})}(),function(){"use strict";angular.module("otus.components").directive("dropFile",e),e.$inject=["$mdToast","$timeout","otus.components.OtusFileUploadService"];function e(e,t,n){return{scope:{files:"=",disable:"<",multipleFiles:"<",extensionArray:"<",functionWhenSelectFiles:"=",individualValidationFunction:"="},restrict:"A",link:function(e,t,r){function i(t){if(o(t),t.preventDefault&&t.preventDefault(),t.stopPropogation&&t.stopPropogation(),!e.disable){var r=t.target.files||t.dataTransfer.files;!e.multipleFiles&&r.length>1?n.showMsg("Selecione apenas um arquivo por vez."):(e.files=n.processFiles(r,e),e.functionWhenSelectFiles&&e.functionWhenSelectFiles(e.files))}}function o(n){var r=t[0];n.preventDefault(),e.disable||("dragover"==n.type?r.classList.contains("draghover")||r.classList.add("draghover"):r.classList.remove("draghover"))}t.on("dragleave",function(e){o(e)}),t.on("dragover",function(e){o(e)}),t[0].ondrop=i}}}}(),function(){"use strict";angular.module("otus.components").component("otusFileUpload",{template:'<style> \n  .animated-all-transition-05s {\n    transition: all 0.5s ease;\n  }\n  \n  .otus-file-upload-box {\n    border: 1.2px dashed silver;\n    background-color: #f8f8f8;\n    padding: 10px;\n  }\n  .otus-file-upload-box.button-only {\n    padding: 10px;\n  }\n  .otus-file-upload-box.draghover {\n    border-color: blue;\n    background-color: #e3e1fa; \n  }\n  .otus-file-upload-box:focus {\n    outline: none;\n  }\n\n  .otus-file-upload-title {\n    /* margin: 5px; */\n  }\n  .disable .otus-file-upload-title {\n    color: #8c8c8c;\n  }\n  .otus-file-upload-subtitle {\n    margin-top: 5px;\n    font-size: .9em;\n    color: #8c8c8c;\n  }\n  .otus-file-upload-accept{\n    font-size: .9em;\n    color: #8c8c8c;\n  }\n\n  .file-upoad-button {\n    /* margin: 10px; */\n  }\n</style><div ng-if="!$ctrl.disableDrop" drop-file multiple-files="$ctrl.multipleFiles" files="$ctrl.files" disable="$ctrl.disable" individual-validation-function="$ctrl.individualValidationFunction" extension-array="$ctrl.extensionArray" function-when-select-files="$ctrl.functionWhenSelectFiles" ng-class="($ctrl.disable? \' disable \' : \'\') + ($ctrl.buttonOnly? \' button-only \' : \'\') + \' otus-file-upload-box animated-all-transition-05s\'" layout="column" layout-align="center center" ng-click="$ctrl.upload()"><span ng-if="!$ctrl.buttonOnly && $ctrl.dropTitle.length" class="otus-file-upload-title">{{$ctrl.dropTitle}}</span> <span ng-if="!$ctrl.buttonOnly && $ctrl.subtitle.length" class="otus-file-upload-subtitle">{{$ctrl.subtitle}}</span><md-button id="otusFileUploadButton" ng-class="$ctrl.buttonClass + \' md-fab file-upoad-button\'" ng-disabled="$ctrl.disable"><md-icon md-font-set="material-icons">{{$ctrl.buttonIcon}}</md-icon><md-tooltip md-direction="{{$ctrl.buttonTooltipDirection}}">{{$ctrl.buttonTooltip + ($ctrl.buttonOnly ? \' - \' + $ctrl.accept : \'\')}}</md-tooltip></md-button><span ng-if="!$ctrl.buttonOnly && $ctrl.accept.length" class="otus-file-upload-accept">{{$ctrl.formatInfoLabel + \' \' + $ctrl.accept}}</span></div><div ng-if="$ctrl.disableDrop"><md-button id="otusFileUploadButton" ng-class="$ctrl.buttonClass + \' md-fab\'" ng-disabled="$ctrl.disable" ng-click="$ctrl.upload()"><md-icon md-font-set="material-icons">{{$ctrl.buttonIcon}}</md-icon><md-tooltip md-direction="{{$ctrl.buttonTooltipDirection}}">{{$ctrl.buttonTooltip + \' - \' + $ctrl.accept}}</md-tooltip></md-button></div>',bindings:{files:"=",disable:"<",disableDrop:"<",subtitle:"<",dropTitle:"<",acceptArray:"<",buttonOnly:"<",buttonIcon:"<",buttonClass:"<",buttonTooltip:"<",multipleFiles:"<",extensionArray:"<",formatInfoLabel:"<",buttonTooltipDirection:"<",functionWhenSelectFiles:"=",individualValidationFunction:"="},controller:e}),e.$inject=["$element","$mdDialog","otus.components.OtusFileUploadService","otus.components.DynamicTableSettingsFactory"];function e(e,t,n,r){var i=this;i.$onInit=function(){void 0===i.dropTitle&&(i.dropTitle="Arraste e solte o(s) arquivo(s)");void 0===i.subtitle&&(i.subtitle="ou clique");void 0===i.formatInfoLabel&&(i.formatInfoLabel="Formatos suportados:");void 0===i.buttonTooltipDirection&&(i.buttonTooltipDirection="right");void 0===i.buttonTooltip&&(i.buttonTooltip="Selecionar Arquivo(s)");void 0===i.buttonClass&&(i.buttonClass="md-primary");void 0===i.buttonIcon&&(i.buttonIcon="file_upload");i.accept=n.getAcceptByExtensionArray(i.extensionArray),i.inputFile=angular.element('<input id="fileInput" type="file" class="ng-hide">'),i.inputFile.attr("accept",i.accept),i.inputFile.attr("multiple",i.multipleFiles),i.inputFile.on("change",function(e){!function(e){var t=e.target.files;i.files=n.processFiles(t,i),i.functionWhenSelectFiles&&i.functionWhenSelectFiles(i.files)}(e)})},i.accept="",i.inputFile,i.upload=function(){i.disable||i.inputFile.click()}}}(),function(){"use strict";angular.module("otus.components").factory("otus.components.OtusFileUploadFactory",e),e.$inject=["$mdToast","$timeout"];function e(e,n){this.create=function(){return new t(e,n,{})},this.fromJson=function(r){return new t(e,n,r)},this.createWithFile=function(r){var i=new t(e,n,{});return i.fillWithFile(r),i};return this}function t(e,t,n){var r=this;r.objectType="FileUploadFactory",r.name=n.name||void 0,r.extension=n.extension||void 0,r.displaySize=n.displaySize||void 0,r.size=n.size||void 0,r.unit=n.unit||void 0,r.date=n.date||void 0,r.file=n.file||void 0,r.rejectType=n.rejectType||void 0,r.isValid=n.isValid||!1,r.toJSON=function(){return{objectType:r.objectType,name:r.name,extension:r.extension,displaySize:r.displaySize,size:r.size,unit:r.unit,date:r.date,file:r.file,isValid:r.isValid,rejectType:r.rejectType}},r.fillWithFile=i,r.getNameAndExtension=a,r.getRoundedAndUnitSize=o,n.file&&i(n.file);function i(e){if(e){var t=a(e.name),n=o(e.size);r.name=t.name,r.extension=t.extension||"",r.displaySize=n.size+" "+n.unit,r.size=n.size,r.unit=n.unit,r.date=e.lastModifiedDate,r.file=e}}function o(e){var t=Number(e),n=0;if(e>1024)for(;t>1024;)n++,t/=1024;return{size:t.toFixed(1),unit:["Byte","KB","mb","GB","TB","PB","EB","ZB","YB"][n]}}function a(e){var t=e.lastIndexOf("."),n=t>0?e.substring(t+1):void 0;return{name:t>0?e.substring(0,t):e,extension:n}}}}(),function(){"use strict";angular.module("otus.components").service("otus.components.OtusFileUploadService",e),e.$inject=["$mdToast","otus.components.OtusFileUploadFactory"];function e(e,t){var n=4e3;this.showMsg=r,this.getStatus=i,this.validation=a,this.validationExtention=o,this.processFiles=function(e,n){for(var o={},l=[],s=[],c=(n.multipleFiles,n.extensionArray,n.individualValidationFunction,0);c<e.length;c++){var d=e[c],u=t.createWithFile(d);a(u,n)&&(u.isValid=!0),s.push(u)}return o=i(s),l=o.acceptedFiles,r(o.msg||"Nehnum arquivo selecionado."),l},this.getAcceptByExtensionArray=function(e){for(var t="",n=e||[],r=0;r<n.length;r++){var i=n[r];i=i.replace(".","").replace(",","").trim(),t=t+(r?", .":".")+i}return t.toLowerCase()};function r(t){e.show(e.simple().textContent(t).hideDelay(n))}function i(e){var t={fileAccepted:0,fileRejected:0,anotherRejection:0,invalidExtension:0,acceptedFiles:[],msg:""};return e.forEach(function(e){e.isValid?(t.fileAccepted++,t.acceptedFiles.push(e)):(t.fileRejected++,"FORMAT"===e.rejectType&&t.invalidExtension++,"ANOTHER"===e.rejectType&&t.anotherRejection++)}),t.fileAccepted&&(t.msg+=t.fileAccepted+" arquivo(s) válido(s). \n"),t.invalidExtension&&(t.msg+=t.invalidExtension+" arquivo(s) rejeitado(s) com formato inválido. \n"),t.anotherRejection&&(t.msg+=t.anotherRejection+" arquivo(s) rejeitado(s) por validação dinâmica. \n"),t}function o(e,t){for(var n=t.extensionArray||[],r=!n.length,i=0;i<n.length;i++){var o=n[i];if("*"===(o=o.replace(".","").replace(",","").trim())||o.toUpperCase()===e.extension.toUpperCase()){r=!0;break}}return r}function a(e,t){var n=!1;return(n=o(e,t))||(e.rejectType="FORMAT"),n&&t.individualValidationFunction&&((n=t.individualValidationFunction(e))||(e.rejectType="ANOTHER")),n}return this}}();